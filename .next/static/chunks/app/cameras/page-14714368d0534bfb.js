(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[709],{52015:(e,s,a)=>{Promise.resolve().then(a.bind(a,46151)),Promise.resolve().then(a.bind(a,97789)),Promise.resolve().then(a.bind(a,1408))},87572:(e,s,a)=>{"use strict";a.d(s,{Cf:()=>c,Es:()=>x,L3:()=>u,c7:()=>m,lG:()=>r,rr:()=>h});var t=a(30004);a(73176);var n=a(98618),l=a(83771),i=a(38347);function r(e){let{...s}=e;return(0,t.jsx)(n.bL,{"data-slot":"dialog",...s})}function d(e){let{...s}=e;return(0,t.jsx)(n.ZL,{"data-slot":"dialog-portal",...s})}function o(e){let{className:s,...a}=e;return(0,t.jsx)(n.hJ,{"data-slot":"dialog-overlay",className:(0,i.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",s),...a})}function c(e){let{className:s,children:a,showCloseButton:r=!0,...c}=e;return(0,t.jsxs)(d,{"data-slot":"dialog-portal",children:[(0,t.jsx)(o,{}),(0,t.jsxs)(n.UC,{"data-slot":"dialog-content",className:(0,i.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",s),...c,children:[a,r&&(0,t.jsxs)(n.bm,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,t.jsx)(l.A,{}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function m(e){let{className:s,...a}=e;return(0,t.jsx)("div",{"data-slot":"dialog-header",className:(0,i.cn)("flex flex-col gap-2 text-center sm:text-left",s),...a})}function x(e){let{className:s,...a}=e;return(0,t.jsx)("div",{"data-slot":"dialog-footer",className:(0,i.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",s),...a})}function u(e){let{className:s,...a}=e;return(0,t.jsx)(n.hE,{"data-slot":"dialog-title",className:(0,i.cn)("text-lg leading-none font-semibold",s),...a})}function h(e){let{className:s,...a}=e;return(0,t.jsx)(n.VY,{"data-slot":"dialog-description",className:(0,i.cn)("text-muted-foreground text-sm",s),...a})}},90268:(e,s,a)=>{"use strict";a.d(s,{d:()=>i});var t=a(30004);a(73176);var n=a(71266),l=a(38347);function i(e){let{className:s,...a}=e;return(0,t.jsx)(n.bL,{"data-slot":"switch",className:(0,l.cn)("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",s),...a,children:(0,t.jsx)(n.zi,{"data-slot":"switch-thumb",className:(0,l.cn)("bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}},97789:(e,s,a)=>{"use strict";a.d(s,{CameraManagement:()=>z});var t=a(30004),n=a(73176),l=a(8924),i=a(80416),r=a(11708),d=a(27040),o=a(23064),c=a(39221),m=a(70894),x=a(76949),u=a(90145),h=a(8752),g=a(48064),j=a(9306),p=a(67898),f=a(41014),v=a(92659),N=a(22520),b=a(52674);function w(e){let{cameras:s,onEdit:a,onDelete:n}=e,i=e=>{switch(e){case"online":return(0,t.jsx)(h.A,{className:"h-4 w-4 text-secondary"});case"offline":return(0,t.jsx)(g.A,{className:"h-4 w-4 text-destructive"});case"error":return(0,t.jsx)(j.A,{className:"h-4 w-4 text-destructive"});case"connecting":return(0,t.jsx)(j.A,{className:"h-4 w-4 text-yellow-500"});default:return(0,t.jsx)(p.A,{className:"h-4 w-4 text-muted-foreground"})}},r=e=>{switch(e){case"online":return(0,t.jsx)(x.E,{className:"bg-secondary/10 text-secondary border-secondary/20",children:"Online"});case"offline":return(0,t.jsx)(x.E,{className:"bg-destructive/10 text-destructive border-destructive/20",children:"Offline"});case"error":return(0,t.jsx)(x.E,{className:"bg-destructive/10 text-destructive border-destructive/20",children:"Error"});case"connecting":return(0,t.jsx)(x.E,{className:"bg-yellow-100 text-yellow-800 border-yellow-200 dark:bg-yellow-900 dark:text-yellow-300",children:"Connecting"});default:return(0,t.jsx)(x.E,{variant:"outline",children:"Unknown"})}},d=e=>{let s=new Date(e),a=Math.floor((new Date().getTime()-s.getTime())/6e4);return a<1?"Just now":a<60?"".concat(a,"m ago"):a<1440?"".concat(Math.floor(a/60),"h ago"):s.toLocaleDateString()};return(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(e=>(0,t.jsxs)(m.Zp,{className:"relative",children:[(0,t.jsx)(m.aR,{className:"pb-3",children:(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[i(e.status),(0,t.jsx)(m.ZB,{className:"text-base",children:e.name})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[r(e.status),(0,t.jsxs)(u.rI,{children:[(0,t.jsx)(u.ty,{asChild:!0,children:(0,t.jsx)(l.$,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:(0,t.jsx)(f.A,{className:"h-4 w-4"})})}),(0,t.jsxs)(u.SQ,{align:"end",children:["online"===e.status&&(0,t.jsxs)(u._2,{children:[(0,t.jsx)(v.A,{className:"mr-2 h-4 w-4"}),"View Live Feed"]}),(0,t.jsxs)(u._2,{onClick:()=>a(e),children:[(0,t.jsx)(N.A,{className:"mr-2 h-4 w-4"}),"Edit"]}),(0,t.jsxs)(u._2,{children:[(0,t.jsx)(o.A,{className:"mr-2 h-4 w-4"}),"Configure"]}),(0,t.jsxs)(u._2,{onClick:()=>n(e.id),className:"text-destructive",children:[(0,t.jsx)(b.A,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})]})]})}),(0,t.jsxs)(m.Wu,{className:"space-y-3",children:[(0,t.jsx)("div",{className:"aspect-video bg-muted rounded-lg flex items-center justify-center",children:"online"===e.status?(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(p.A,{className:"h-8 w-8 mx-auto mb-2 text-muted-foreground"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Live Feed"})]}):(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(g.A,{className:"h-8 w-8 mx-auto mb-2 text-muted-foreground"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"No Signal"})]})}),(0,t.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Location:"}),(0,t.jsx)("span",{className:"truncate ml-2",children:e.location})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Resolution:"}),(0,t.jsx)("span",{children:e.resolution})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"FPS:"}),(0,t.jsx)("span",{children:e.fps})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Recognition:"}),(0,t.jsx)(x.E,{variant:e.recognitionEnabled?"default":"secondary",className:"text-xs",children:e.recognitionEnabled?"Enabled":"Disabled"})]}),e.recognitionEnabled&&(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Threshold:"}),(0,t.jsxs)("span",{children:[e.recognitionThreshold,"%"]})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Last seen:"}),(0,t.jsx)("span",{children:d(e.lastSeen)})]})]})]})]},e.id))})}var y=a(42320),S=a(61072),C=a(31908),A=a(87572),E=a(64574),k=a(90268),D=a(15668),T=a(38347);function O(e){let{className:s,defaultValue:a,value:l,min:i=0,max:r=100,...d}=e,o=n.useMemo(()=>Array.isArray(l)?l:Array.isArray(a)?a:[i,r],[l,a,i,r]);return(0,t.jsxs)(D.bL,{"data-slot":"slider",defaultValue:a,value:l,min:i,max:r,className:(0,T.cn)("relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col",s),...d,children:[(0,t.jsx)(D.CC,{"data-slot":"slider-track",className:(0,T.cn)("bg-muted relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-1.5 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5"),children:(0,t.jsx)(D.Q6,{"data-slot":"slider-range",className:(0,T.cn)("bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full")})}),Array.from({length:o.length},(e,s)=>(0,t.jsx)(D.zi,{"data-slot":"slider-thumb",className:"border-primary bg-background ring-ring/50 block size-4 shrink-0 rounded-full border shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50"},s))]})}let L=C.Ik({name:C.Yj().min(2,"Name must be at least 2 characters"),location:C.Yj().min(1,"Location is required"),rtspUrl:C.Yj().url("Please enter a valid RTSP URL").startsWith("rtsp://","URL must start with rtsp://"),resolution:C.Yj().min(1,"Resolution is required"),fps:C.ai().min(1).max(60),recognitionEnabled:C.zM(),recognitionThreshold:C.ai().min(50).max(99),dedupeWindow:C.ai().min(10).max(120)});function R(e){var s,a,r;let{open:d,onOpenChange:o,camera:c,onSave:m}=e,[x,u]=(0,n.useState)(null===(s=null==c?void 0:c.recognitionEnabled)||void 0===s||s),[h,g]=(0,n.useState)([null!==(a=null==c?void 0:c.recognitionThreshold)&&void 0!==a?a:85]),[j,p]=(0,n.useState)([null!==(r=null==c?void 0:c.dedupeWindow)&&void 0!==r?r:30]),{register:f,handleSubmit:v,setValue:N,watch:b,reset:w,formState:{errors:C}}=(0,y.mN)({resolver:(0,S.u)(L)});return(0,n.useEffect)(()=>{c?(w({name:c.name,location:c.location,rtspUrl:c.rtspUrl,resolution:c.resolution,fps:c.fps,recognitionEnabled:c.recognitionEnabled,recognitionThreshold:c.recognitionThreshold,dedupeWindow:c.dedupeWindow}),u(c.recognitionEnabled),g([c.recognitionThreshold]),p([c.dedupeWindow])):(w({name:"",location:"",rtspUrl:"rtsp://",resolution:"1920x1080",fps:30,recognitionEnabled:!0,recognitionThreshold:85,dedupeWindow:30}),u(!0),g([85]),p([30]))},[c,w]),(0,t.jsx)(A.lG,{open:d,onOpenChange:o,children:(0,t.jsxs)(A.Cf,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,t.jsxs)(A.c7,{children:[(0,t.jsx)(A.L3,{children:c?"Edit Camera":"Add New Camera"}),(0,t.jsx)(A.rr,{children:c?"Update camera configuration and recognition settings.":"Add a new CCTV camera to the system."})]}),(0,t.jsxs)("form",{onSubmit:v(e=>{m({...e,recognitionEnabled:x,recognitionThreshold:h[0],dedupeWindow:j[0]})}),className:"space-y-6",children:[(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h3",{className:"text-lg font-medium",children:"Basic Information"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(E.J,{htmlFor:"name",children:"Camera Name"}),(0,t.jsx)(i.p,{id:"name",...f("name"),placeholder:"e.g., Main Entrance"}),C.name&&(0,t.jsx)("p",{className:"text-sm text-destructive",children:C.name.message})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(E.J,{htmlFor:"location",children:"Location"}),(0,t.jsx)(i.p,{id:"location",...f("location"),placeholder:"e.g., Building A - Front Door"}),C.location&&(0,t.jsx)("p",{className:"text-sm text-destructive",children:C.location.message})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(E.J,{htmlFor:"rtspUrl",children:"RTSP URL"}),(0,t.jsx)(i.p,{id:"rtspUrl",...f("rtspUrl"),placeholder:"rtsp://192.168.1.100:554/stream1"}),C.rtspUrl&&(0,t.jsx)("p",{className:"text-sm text-destructive",children:C.rtspUrl.message})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(E.J,{htmlFor:"resolution",children:"Resolution"}),(0,t.jsx)(i.p,{id:"resolution",...f("resolution"),placeholder:"1920x1080"}),C.resolution&&(0,t.jsx)("p",{className:"text-sm text-destructive",children:C.resolution.message})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(E.J,{htmlFor:"fps",children:"FPS"}),(0,t.jsx)(i.p,{id:"fps",type:"number",min:"1",max:"60",...f("fps",{valueAsNumber:!0}),placeholder:"30"}),C.fps&&(0,t.jsx)("p",{className:"text-sm text-destructive",children:C.fps.message})]})]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h3",{className:"text-lg font-medium",children:"Recognition Settings"}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"space-y-0.5",children:[(0,t.jsx)(E.J,{children:"Enable Face Recognition"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Process faces detected by this camera"})]}),(0,t.jsx)(k.d,{checked:x,onCheckedChange:e=>{u(e),N("recognitionEnabled",e)}})]}),x&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)(E.J,{children:["Recognition Threshold: ",h[0],"%"]}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Minimum confidence level required for face recognition"}),(0,t.jsx)(O,{value:h,onValueChange:e=>{g(e),N("recognitionThreshold",e[0])},max:99,min:50,step:1,className:"w-full"})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)(E.J,{children:["Dedupe Window: ",j[0]," seconds"]}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Minimum time between consecutive detections of the same person"}),(0,t.jsx)(O,{value:j,onValueChange:e=>{p(e),N("dedupeWindow",e[0])},max:120,min:10,step:5,className:"w-full"})]})]})]}),(0,t.jsxs)(A.Es,{children:[(0,t.jsx)(l.$,{type:"button",variant:"outline",onClick:()=>o(!1),children:"Cancel"}),(0,t.jsx)(l.$,{type:"submit",children:c?"Update Camera":"Add Camera"})]})]})]})})}function W(e){let{open:s,onOpenChange:a,settings:i,onSave:r}=e,[d,o]=(0,n.useState)(i);return(0,t.jsx)(A.lG,{open:s,onOpenChange:a,children:(0,t.jsxs)(A.Cf,{className:"max-w-lg",children:[(0,t.jsxs)(A.c7,{children:[(0,t.jsx)(A.L3,{children:"Global Camera Settings"}),(0,t.jsx)(A.rr,{children:"Configure system-wide camera and recognition settings"})]}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)(E.J,{children:["Global Recognition Threshold: ",d.globalRecognitionThreshold,"%"]}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Default threshold for new cameras"}),(0,t.jsx)(O,{value:[d.globalRecognitionThreshold],onValueChange:e=>o(s=>({...s,globalRecognitionThreshold:e[0]})),max:99,min:50,step:1,className:"w-full"})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)(E.J,{children:["Global Dedupe Window: ",d.globalDedupeWindow," seconds"]}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Default dedupe window for new cameras"}),(0,t.jsx)(O,{value:[d.globalDedupeWindow],onValueChange:e=>o(s=>({...s,globalDedupeWindow:e[0]})),max:120,min:10,step:5,className:"w-full"})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)(E.J,{children:["Max Concurrent Streams: ",d.maxConcurrentStreams]}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Maximum number of simultaneous camera streams"}),(0,t.jsx)(O,{value:[d.maxConcurrentStreams],onValueChange:e=>o(s=>({...s,maxConcurrentStreams:e[0]})),max:16,min:1,step:1,className:"w-full"})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"space-y-0.5",children:[(0,t.jsx)(E.J,{children:"Recording Enabled"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Enable automatic recording of camera feeds"})]}),(0,t.jsx)(k.d,{checked:d.recordingEnabled,onCheckedChange:e=>o(s=>({...s,recordingEnabled:e}))})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"space-y-0.5",children:[(0,t.jsx)(E.J,{children:"Alerts Enabled"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Enable system alerts for camera events"})]}),(0,t.jsx)(k.d,{checked:d.alertsEnabled,onCheckedChange:e=>o(s=>({...s,alertsEnabled:e}))})]})]})]}),(0,t.jsxs)(A.Es,{children:[(0,t.jsx)(l.$,{variant:"outline",onClick:()=>a(!1),children:"Cancel"}),(0,t.jsx)(l.$,{onClick:()=>{r(d)},children:"Save Settings"})]})]})})}var U=a(98620),I=a(14950),M=a(52368);function F(e){var s,a;let{cameras:i}=e,[r,d]=(0,n.useState)(null),[o,c]=(0,n.useState)(new Set),u=e=>{c(s=>{let a=new Set(s);return a.has(e)?a.delete(e):a.add(e),a})};return 0===i.length?(0,t.jsx)(m.Zp,{children:(0,t.jsx)(m.Wu,{className:"flex items-center justify-center h-64",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(p.A,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),(0,t.jsx)("h3",{className:"text-lg font-medium mb-2",children:"No Online Cameras"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"No cameras are currently online to display live feeds."})]})})}):(0,t.jsxs)("div",{className:"space-y-6",children:[r&&(0,t.jsxs)(m.Zp,{children:[(0,t.jsx)(m.aR,{children:(0,t.jsxs)(m.ZB,{className:"flex items-center justify-between",children:[(0,t.jsxs)("span",{children:["Featured Feed: ",null===(s=i.find(e=>e.id===r))||void 0===s?void 0:s.name]}),(0,t.jsx)(l.$,{variant:"outline",size:"sm",onClick:()=>d(null),children:"Close"})]})}),(0,t.jsx)(m.Wu,{children:(0,t.jsx)("div",{className:"aspect-video bg-black rounded-lg flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center text-white",children:[(0,t.jsx)(p.A,{className:"h-16 w-16 mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-lg",children:"Live Feed Placeholder"}),(0,t.jsx)("p",{className:"text-sm opacity-75",children:null===(a=i.find(e=>e.id===r))||void 0===a?void 0:a.rtspUrl})]})})})]}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:i.map(e=>(0,t.jsxs)(m.Zp,{className:"relative group",children:[(0,t.jsx)(m.aR,{className:"pb-2",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(m.ZB,{className:"text-sm truncate",children:e.name}),(0,t.jsx)(x.E,{className:"bg-secondary/10 text-secondary text-xs",children:"Live"})]})}),(0,t.jsxs)(m.Wu,{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"aspect-video bg-black rounded-lg relative overflow-hidden group-hover:ring-2 group-hover:ring-primary transition-all",children:[(0,t.jsx)("div",{className:"absolute inset-0 flex items-center justify-center text-white",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(p.A,{className:"h-8 w-8 mx-auto mb-2"}),(0,t.jsx)("p",{className:"text-xs",children:"Live Feed"})]})}),(0,t.jsx)("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(l.$,{size:"sm",variant:"secondary",onClick:()=>d(e.id),className:"bg-white/20 hover:bg-white/30 text-white border-white/20",children:(0,t.jsx)(U.A,{className:"h-4 w-4"})}),(0,t.jsx)(l.$,{size:"sm",variant:"secondary",onClick:()=>u(e.id),className:"bg-white/20 hover:bg-white/30 text-white border-white/20",children:o.has(e.id)?(0,t.jsx)(I.A,{className:"h-4 w-4"}):(0,t.jsx)(M.A,{className:"h-4 w-4"})})]})}),(0,t.jsxs)("div",{className:"absolute top-2 left-2 flex gap-1",children:[(0,t.jsx)("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse"}),e.recognitionEnabled&&(0,t.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full"})]})]}),(0,t.jsxs)("div",{className:"text-xs text-muted-foreground space-y-1",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"Resolution:"}),(0,t.jsx)("span",{children:e.resolution})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"FPS:"}),(0,t.jsx)("span",{children:e.fps})]}),(0,t.jsxs)("div",{className:"truncate",children:[(0,t.jsx)("span",{children:"Location: "}),(0,t.jsx)("span",{children:e.location})]})]})]})]},e.id))})]})}function z(){let[e,s]=(0,n.useState)([]),[a,m]=(0,n.useState)([]),[x,u]=(0,n.useState)({status:"All Status",location:"All Locations"}),[h,g]=(0,n.useState)({globalRecognitionThreshold:85,globalDedupeWindow:30,maxConcurrentStreams:8,recordingEnabled:!0,alertsEnabled:!0}),[j,p]=(0,n.useState)(!1),[f,v]=(0,n.useState)(!1),[N,b]=(0,n.useState)(null);(0,n.useEffect)(()=>{s([{id:"CAM001",name:"Main Entrance",location:"Building A - Front Door",rtspUrl:"rtsp://192.168.1.100:554/stream1",status:"online",lastSeen:new Date().toISOString(),resolution:"1920x1080",fps:30,recognitionEnabled:!0,recognitionThreshold:90,dedupeWindow:30,createdAt:"2024-01-01T09:00:00Z",updatedAt:new Date().toISOString()},{id:"CAM002",name:"Side Exit",location:"Building A - Side Door",rtspUrl:"rtsp://192.168.1.101:554/stream1",status:"online",lastSeen:new Date().toISOString(),resolution:"1920x1080",fps:30,recognitionEnabled:!0,recognitionThreshold:85,dedupeWindow:25,createdAt:"2024-01-01T09:00:00Z",updatedAt:new Date().toISOString()},{id:"CAM003",name:"Parking Entrance",location:"Parking Lot - Gate",rtspUrl:"rtsp://192.168.1.102:554/stream1",status:"error",lastSeen:new Date(Date.now()-3e5).toISOString(),resolution:"1920x1080",fps:0,recognitionEnabled:!1,recognitionThreshold:80,dedupeWindow:35,createdAt:"2024-01-01T09:00:00Z",updatedAt:new Date(Date.now()-3e5).toISOString()},{id:"CAM004",name:"Reception Area",location:"Building A - Lobby",rtspUrl:"rtsp://192.168.1.103:554/stream1",status:"online",lastSeen:new Date().toISOString(),resolution:"1920x1080",fps:30,recognitionEnabled:!0,recognitionThreshold:88,dedupeWindow:30,createdAt:"2024-01-01T09:00:00Z",updatedAt:new Date().toISOString()},{id:"CAM005",name:"Cafeteria",location:"Building B - Dining Area",rtspUrl:"rtsp://192.168.1.104:554/stream1",status:"offline",lastSeen:new Date(Date.now()-72e5).toISOString(),resolution:"1920x1080",fps:0,recognitionEnabled:!1,recognitionThreshold:85,dedupeWindow:30,createdAt:"2024-01-01T09:00:00Z",updatedAt:new Date(Date.now()-72e5).toISOString()},{id:"CAM006",name:"Conference Room A",location:"Building A - Floor 2",rtspUrl:"rtsp://192.168.1.105:554/stream1",status:"connecting",lastSeen:new Date(Date.now()-3e4).toISOString(),resolution:"1920x1080",fps:15,recognitionEnabled:!0,recognitionThreshold:85,dedupeWindow:30,createdAt:"2024-01-01T09:00:00Z",updatedAt:new Date().toISOString()}])},[]),(0,n.useEffect)(()=>{m(e.filter(e=>{let s="All Status"===x.status||e.status===x.status,a="All Locations"===x.location||e.location.includes(x.location);return s&&a}))},[e,x]);let y=Array.from(new Set(e.map(e=>e.location.split(" - ")[0]))),S=e.filter(e=>"online"===e.status);return(0,t.jsxs)("div",{className:"p-6 space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-heading",children:"Camera Management"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Manage CCTV cameras, configure recognition settings, and monitor live feeds"})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)(l.$,{onClick:()=>v(!0),variant:"outline",children:[(0,t.jsx)(o.A,{className:"mr-2 h-4 w-4"}),"Settings"]}),(0,t.jsxs)(l.$,{onClick:()=>{b(null),p(!0)},children:[(0,t.jsx)(c.A,{className:"mr-2 h-4 w-4"}),"Add Camera"]})]})]}),(0,t.jsxs)(d.tU,{defaultValue:"overview",className:"space-y-4",children:[(0,t.jsxs)(d.j7,{className:"grid w-full grid-cols-3",children:[(0,t.jsx)(d.Xi,{value:"overview",children:"Camera Overview"}),(0,t.jsx)(d.Xi,{value:"live",children:"Live Feeds"}),(0,t.jsx)(d.Xi,{value:"configuration",children:"Configuration"})]}),(0,t.jsxs)(d.av,{value:"overview",className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,t.jsxs)(r.l6,{value:x.status,onValueChange:e=>u(s=>({...s,status:e})),children:[(0,t.jsx)(r.bq,{className:"w-full sm:w-48",children:(0,t.jsx)(r.yv,{placeholder:"All Status"})}),(0,t.jsxs)(r.gC,{children:[(0,t.jsx)(r.eb,{value:"All Status",children:"All Status"}),(0,t.jsx)(r.eb,{value:"online",children:"Online"}),(0,t.jsx)(r.eb,{value:"offline",children:"Offline"}),(0,t.jsx)(r.eb,{value:"error",children:"Error"}),(0,t.jsx)(r.eb,{value:"connecting",children:"Connecting"})]})]}),(0,t.jsxs)(r.l6,{value:x.location,onValueChange:e=>u(s=>({...s,location:e})),children:[(0,t.jsx)(r.bq,{className:"w-full sm:w-48",children:(0,t.jsx)(r.yv,{placeholder:"All Locations"})}),(0,t.jsxs)(r.gC,{children:[(0,t.jsx)(r.eb,{value:"All Locations",children:"All Locations"}),y.map(e=>(0,t.jsx)(r.eb,{value:e,children:e},e))]})]})]}),(0,t.jsx)(w,{cameras:a,onEdit:e=>{b(e),p(!0)},onDelete:e=>{s(s=>s.filter(s=>s.id!==e))}})]}),(0,t.jsx)(d.av,{value:"live",className:"space-y-4",children:(0,t.jsx)(F,{cameras:S})}),(0,t.jsx)(d.av,{value:"configuration",className:"space-y-4",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h3",{className:"text-lg font-heading",children:"Global Settings"}),(0,t.jsxs)("div",{className:"space-y-4 p-4 border rounded-lg",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"text-sm font-medium",children:["Recognition Threshold: ",h.globalRecognitionThreshold,"%"]}),(0,t.jsx)(i.p,{type:"range",min:"50",max:"99",value:h.globalRecognitionThreshold,onChange:e=>g(s=>({...s,globalRecognitionThreshold:Number.parseInt(e.target.value)})),className:"mt-2"})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"text-sm font-medium",children:["Dedupe Window: ",h.globalDedupeWindow,"s"]}),(0,t.jsx)(i.p,{type:"range",min:"10",max:"120",value:h.globalDedupeWindow,onChange:e=>g(s=>({...s,globalDedupeWindow:Number.parseInt(e.target.value)})),className:"mt-2"})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"text-sm font-medium",children:["Max Concurrent Streams: ",h.maxConcurrentStreams]}),(0,t.jsx)(i.p,{type:"range",min:"1",max:"16",value:h.maxConcurrentStreams,onChange:e=>g(s=>({...s,maxConcurrentStreams:Number.parseInt(e.target.value)})),className:"mt-2"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h3",{className:"text-lg font-heading",children:"System Status"}),(0,t.jsxs)("div",{className:"space-y-4 p-4 border rounded-lg",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"Total Cameras:"}),(0,t.jsx)("span",{className:"font-medium",children:e.length})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"Online:"}),(0,t.jsx)("span",{className:"font-medium text-secondary",children:e.filter(e=>"online"===e.status).length})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"Offline:"}),(0,t.jsx)("span",{className:"font-medium text-destructive",children:e.filter(e=>"offline"===e.status).length})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"Recognition Enabled:"}),(0,t.jsx)("span",{className:"font-medium",children:e.filter(e=>e.recognitionEnabled).length})]})]})]})]})})]}),(0,t.jsx)(R,{open:j,onOpenChange:p,camera:N,onSave:a=>{if(N)s(e=>e.map(e=>e.id===N.id?{...e,...a,updatedAt:new Date().toISOString()}:e));else{let t={id:"CAM".concat((e.length+1).toString().padStart(3,"0")),status:"connecting",lastSeen:new Date().toISOString(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),...a};s(e=>[...e,t])}p(!1)}}),(0,t.jsx)(W,{open:f,onOpenChange:v,settings:h,onSave:e=>{g(e),v(!1)}})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[152,12,422,260,106,556,524,827,476,571,358],()=>s(52015)),_N_E=e.O()}]);