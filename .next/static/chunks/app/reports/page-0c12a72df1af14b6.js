(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[22],{15754:(e,t,a)=>{Promise.resolve().then(a.bind(a,46151)),Promise.resolve().then(a.bind(a,1408)),Promise.resolve().then(a.bind(a,40371))},40371:(e,t,a)=>{"use strict";a.d(t,{ReportsAnalytics:()=>P});var r=a(30004),n=a(73176),s=a(70894),l=a(8924),o=a(80416),d=a(64574),c=a(11708),i=a(27040),h=a(75413),x=a(57274),m=a(37603),u=a(21253),j=a(97516),g=a(46578),p=a(36539),v=a(40695),f=a(38347);let y={light:"",dark:".dark"},b=n.createContext(null);function N(e){let{id:t,className:a,children:s,config:l,...o}=e,d=n.useId(),c="chart-".concat(t||d.replace(/:/g,""));return(0,r.jsx)(b.Provider,{value:{config:l},children:(0,r.jsxs)("div",{"data-slot":"chart","data-chart":c,className:(0,f.cn)("[&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border flex aspect-video justify-center text-xs [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-hidden [&_.recharts-sector]:outline-hidden [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-surface]:outline-hidden",a),...o,children:[(0,r.jsx)(A,{id:c,config:l}),(0,r.jsx)(g.u,{children:s})]})})}let A=e=>{let{id:t,config:a}=e,n=Object.entries(a).filter(e=>{let[,t]=e;return t.theme||t.color});return n.length?(0,r.jsx)("style",{dangerouslySetInnerHTML:{__html:Object.entries(y).map(e=>{let[a,r]=e;return"\n".concat(r," [data-chart=").concat(t,"] {\n").concat(n.map(e=>{var t;let[r,n]=e,s=(null===(t=n.theme)||void 0===t?void 0:t[a])||n.color;return s?"  --color-".concat(r,": ").concat(s,";"):null}).join("\n"),"\n}\n")}).join("\n")}}):null},k=p.m;function w(e){let{active:t,payload:a,className:s,indicator:l="dot",hideLabel:o=!1,hideIndicator:d=!1,label:c,labelFormatter:i,labelClassName:h,formatter:x,color:m,nameKey:u,labelKey:j}=e,{config:g}=function(){let e=n.useContext(b);if(!e)throw Error("useChart must be used within a <ChartContainer />");return e}(),p=n.useMemo(()=>{var e;if(o||!(null==a?void 0:a.length))return null;let[t]=a,n="".concat(j||(null==t?void 0:t.dataKey)||(null==t?void 0:t.name)||"value"),s=R(g,t,n),l=j||"string"!=typeof c?null==s?void 0:s.label:(null===(e=g[c])||void 0===e?void 0:e.label)||c;return i?(0,r.jsx)("div",{className:(0,f.cn)("font-medium",h),children:i(l,a)}):l?(0,r.jsx)("div",{className:(0,f.cn)("font-medium",h),children:l}):null},[c,i,a,o,h,g,j]);if(!t||!(null==a?void 0:a.length))return null;let v=1===a.length&&"dot"!==l;return(0,r.jsxs)("div",{className:(0,f.cn)("border-border/50 bg-background grid min-w-[8rem] items-start gap-1.5 rounded-lg border px-2.5 py-1.5 text-xs shadow-xl",s),children:[v?null:p,(0,r.jsx)("div",{className:"grid gap-1.5",children:a.map((e,t)=>{let a="".concat(u||e.name||e.dataKey||"value"),n=R(g,e,a),s=m||e.payload.fill||e.color;return(0,r.jsx)("div",{className:(0,f.cn)("[&>svg]:text-muted-foreground flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5","dot"===l&&"items-center"),children:x&&(null==e?void 0:e.value)!==void 0&&e.name?x(e.value,e.name,e,t,e.payload):(0,r.jsxs)(r.Fragment,{children:[(null==n?void 0:n.icon)?(0,r.jsx)(n.icon,{}):!d&&(0,r.jsx)("div",{className:(0,f.cn)("shrink-0 rounded-[2px] border-(--color-border) bg-(--color-bg)",{"h-2.5 w-2.5":"dot"===l,"w-1":"line"===l,"w-0 border-[1.5px] border-dashed bg-transparent":"dashed"===l,"my-0.5":v&&"dashed"===l}),style:{"--color-bg":s,"--color-border":s}}),(0,r.jsxs)("div",{className:(0,f.cn)("flex flex-1 justify-between leading-none",v?"items-end":"items-center"),children:[(0,r.jsxs)("div",{className:"grid gap-1.5",children:[v?p:null,(0,r.jsx)("span",{className:"text-muted-foreground",children:(null==n?void 0:n.label)||e.name})]}),e.value&&(0,r.jsx)("span",{className:"text-foreground font-mono font-medium tabular-nums",children:e.value.toLocaleString()})]})]})},e.dataKey)})})]})}function R(e,t,a){if("object"!=typeof t||null===t)return;let r="payload"in t&&"object"==typeof t.payload&&null!==t.payload?t.payload:void 0,n=a;return a in t&&"string"==typeof t[a]?n=t[a]:r&&a in r&&"string"==typeof r[a]&&(n=r[a]),n in e?e[n]:e[a]}v.s;var M=a(20835),T=a(26127),D=a(38151),W=a(93957);let L={present:{label:"Present",color:"hsl(var(--chart-2))"},late:{label:"Late",color:"hsl(var(--chart-4))"},absent:{label:"Absent",color:"hsl(var(--chart-5))"}};function S(e){let{data:t}=e,a=e=>new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric"}),n=t.map(e=>({...e,date:a(e.date)}));return(0,r.jsxs)(s.Zp,{children:[(0,r.jsxs)(s.aR,{children:[(0,r.jsx)(s.ZB,{children:"Attendance Trends Over Time"}),(0,r.jsx)(s.BT,{children:"Daily attendance patterns showing present, late, and absent employees"})]}),(0,r.jsx)(s.Wu,{children:(0,r.jsx)(N,{config:L,className:"h-[400px]",children:(0,r.jsx)(g.u,{width:"100%",height:"100%",children:(0,r.jsxs)(M.Q,{data:n,margin:{top:20,right:30,left:20,bottom:5},children:[(0,r.jsx)(T.W,{dataKey:"date"}),(0,r.jsx)(D.h,{}),(0,r.jsx)(k,{content:(0,r.jsx)(w,{})}),(0,r.jsx)(v.s,{}),(0,r.jsx)(W.Gk,{type:"monotone",dataKey:"present",stackId:"1",stroke:L.present.color,fill:L.present.color,fillOpacity:.8}),(0,r.jsx)(W.Gk,{type:"monotone",dataKey:"late",stackId:"1",stroke:L.late.color,fill:L.late.color,fillOpacity:.8}),(0,r.jsx)(W.Gk,{type:"monotone",dataKey:"absent",stackId:"1",stroke:L.absent.color,fill:L.absent.color,fillOpacity:.8})]})})})})]})}var _=a(41735),B=a(8992);let Z={present:{label:"Present",color:"hsl(var(--chart-2))"},late:{label:"Late",color:"hsl(var(--chart-4))"},absent:{label:"Absent",color:"hsl(var(--chart-5))"},attendanceRate:{label:"Attendance Rate",color:"hsl(var(--chart-1))"}};function F(e){let{data:t}=e;return(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,r.jsxs)(s.Zp,{children:[(0,r.jsxs)(s.aR,{children:[(0,r.jsx)(s.ZB,{children:"Department Attendance Breakdown"}),(0,r.jsx)(s.BT,{children:"Employee attendance status by department"})]}),(0,r.jsx)(s.Wu,{children:(0,r.jsx)(N,{config:Z,className:"h-[300px]",children:(0,r.jsx)(g.u,{width:"100%",height:"100%",children:(0,r.jsxs)(_.E,{data:t,margin:{top:20,right:30,left:20,bottom:5},children:[(0,r.jsx)(T.W,{dataKey:"department",angle:-45,textAnchor:"end",height:80}),(0,r.jsx)(D.h,{}),(0,r.jsx)(k,{content:(0,r.jsx)(w,{})}),(0,r.jsx)(v.s,{}),(0,r.jsx)(B.y,{dataKey:"present",stackId:"a",fill:Z.present.color}),(0,r.jsx)(B.y,{dataKey:"late",stackId:"a",fill:Z.late.color}),(0,r.jsx)(B.y,{dataKey:"absent",stackId:"a",fill:Z.absent.color})]})})})})]}),(0,r.jsxs)(s.Zp,{children:[(0,r.jsxs)(s.aR,{children:[(0,r.jsx)(s.ZB,{children:"Department Attendance Rates"}),(0,r.jsx)(s.BT,{children:"Attendance percentage by department"})]}),(0,r.jsx)(s.Wu,{children:(0,r.jsx)(N,{config:Z,className:"h-[300px]",children:(0,r.jsx)(g.u,{width:"100%",height:"100%",children:(0,r.jsxs)(_.E,{data:t,margin:{top:20,right:30,left:20,bottom:5},children:[(0,r.jsx)(T.W,{dataKey:"department",angle:-45,textAnchor:"end",height:80}),(0,r.jsx)(D.h,{domain:[0,100]}),(0,r.jsx)(k,{content:(0,r.jsx)(w,{formatter:e=>["".concat(Number(e).toFixed(1),"%"),"Attendance Rate"]})}),(0,r.jsx)(B.y,{dataKey:"attendanceRate",fill:Z.attendanceRate.color})]})})})})]})]})}let K={count:{label:"Late Arrivals",color:"hsl(var(--chart-4))"}};function O(e){let{data:t}=e;return(0,r.jsxs)(s.Zp,{children:[(0,r.jsxs)(s.aR,{children:[(0,r.jsx)(s.ZB,{children:"Late Arrivals by Time"}),(0,r.jsx)(s.BT,{children:"Distribution of late arrivals throughout the morning hours"})]}),(0,r.jsx)(s.Wu,{children:(0,r.jsx)(N,{config:K,className:"h-[400px]",children:(0,r.jsx)(g.u,{width:"100%",height:"100%",children:(0,r.jsxs)(_.E,{data:t,margin:{top:20,right:30,left:20,bottom:5},children:[(0,r.jsx)(T.W,{dataKey:"hour"}),(0,r.jsx)(D.h,{}),(0,r.jsx)(k,{content:(0,r.jsx)(w,{formatter:(e,a)=>{var r;return["".concat(e," employees (").concat(null===(r=t.find(t=>t.count===e))||void 0===r?void 0:r.percentage.toFixed(1),"%)"),"Late Arrivals"]}})}),(0,r.jsx)(B.y,{dataKey:"count",fill:K.count.color})]})})})})]})}var C=a(56702),E=a(75337);let I={avgAttendance:{label:"Avg Attendance (%)",color:"hsl(var(--chart-2))"},avgLateArrivals:{label:"Avg Late Arrivals (%)",color:"hsl(var(--chart-4))"},avgWorkingHours:{label:"Avg Working Hours",color:"hsl(var(--chart-1))"}};function H(e){let{data:t}=e;return(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,r.jsxs)(s.Zp,{children:[(0,r.jsxs)(s.aR,{children:[(0,r.jsx)(s.ZB,{children:"Monthly Attendance & Late Arrivals"}),(0,r.jsx)(s.BT,{children:"Trends in attendance rates and late arrivals over time"})]}),(0,r.jsx)(s.Wu,{children:(0,r.jsx)(N,{config:I,className:"h-[300px]",children:(0,r.jsx)(g.u,{width:"100%",height:"100%",children:(0,r.jsxs)(C.b,{data:t,margin:{top:20,right:30,left:20,bottom:5},children:[(0,r.jsx)(T.W,{dataKey:"month"}),(0,r.jsx)(D.h,{domain:[0,100]}),(0,r.jsx)(k,{content:(0,r.jsx)(w,{formatter:(e,t)=>["".concat(Number(e).toFixed(1),"%"),"avgAttendance"===t?"Attendance":"Late Arrivals"]})}),(0,r.jsx)(v.s,{}),(0,r.jsx)(E.N,{type:"monotone",dataKey:"avgAttendance",stroke:I.avgAttendance.color,strokeWidth:2,dot:{fill:I.avgAttendance.color}}),(0,r.jsx)(E.N,{type:"monotone",dataKey:"avgLateArrivals",stroke:I.avgLateArrivals.color,strokeWidth:2,dot:{fill:I.avgLateArrivals.color}})]})})})})]}),(0,r.jsxs)(s.Zp,{children:[(0,r.jsxs)(s.aR,{children:[(0,r.jsx)(s.ZB,{children:"Average Working Hours"}),(0,r.jsx)(s.BT,{children:"Monthly trend of average working hours per employee"})]}),(0,r.jsx)(s.Wu,{children:(0,r.jsx)(N,{config:I,className:"h-[300px]",children:(0,r.jsx)(g.u,{width:"100%",height:"100%",children:(0,r.jsxs)(C.b,{data:t,margin:{top:20,right:30,left:20,bottom:5},children:[(0,r.jsx)(T.W,{dataKey:"month"}),(0,r.jsx)(D.h,{domain:[6,10]}),(0,r.jsx)(k,{content:(0,r.jsx)(w,{formatter:e=>["".concat(Number(e).toFixed(1)," hours"),"Avg Working Hours"]})}),(0,r.jsx)(E.N,{type:"monotone",dataKey:"avgWorkingHours",stroke:I.avgWorkingHours.color,strokeWidth:2,dot:{fill:I.avgWorkingHours.color}})]})})})})]})]})}function P(){let[e,t]=(0,n.useState)({dateFrom:new Date(Date.now()-2592e6).toISOString().split("T")[0],dateTo:new Date().toISOString().split("T")[0],department:"All Departments"}),[a,g]=(0,n.useState)([]),[p,v]=(0,n.useState)([]),[f,y]=(0,n.useState)([]),[b,N]=(0,n.useState)([]);(0,n.useEffect)(()=>{(()=>{let t=new Date(e.dateFrom),a=Math.ceil((new Date(e.dateTo).getTime()-t.getTime())/864e5),r=[];for(let e=0;e<=a;e++){let a=new Date(t);a.setDate(a.getDate()+e);let n=a.toISOString().split("T")[0],s=50+Math.floor(20*Math.random()),l=Math.floor(s*(.8+.15*Math.random())),o=Math.floor(l*(.1+.1*Math.random())),d=s-l;r.push({date:n,present:l-o,absent:d,late:o,total:s,attendanceRate:l/s*100})}let n=["Engineering","Design","Marketing","Sales","HR","Finance"].map(e=>{let t=8+Math.floor(12*Math.random()),a=Math.floor(t*(.75+.2*Math.random())),r=Math.floor(a*(.05+.15*Math.random()));return{department:e,present:a-r,absent:t-a,late:r,total:t,attendanceRate:a/t*100}}),s=[],l=["8:00","8:30","9:00","9:30","10:00","10:30","11:00","11:30","12:00"],o=0,d=l.map(()=>Math.floor(15*Math.random())+1);o=d.reduce((e,t)=>e+t,0),l.forEach((e,t)=>{s.push({hour:e,count:d[t],percentage:d[t]/o*100})});let c=[],i=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],h=new Date().getMonth();for(let e=0;e<6;e++){let t=(h-5+e+12)%12;c.push({month:i[t],avgAttendance:75+20*Math.random(),avgLateArrivals:5+10*Math.random(),avgWorkingHours:7.5+1.5*Math.random()})}g(r),v("All Departments"===e.department?n:n.filter(t=>t.department===e.department)),y(s),N(c)})()},[e]);let A=(0,n.useMemo)(()=>{let e=a.reduce((e,t)=>e+t.total,0),t=a.reduce((e,t)=>e+t.present+t.late,0),r=a.reduce((e,t)=>e+t.late,0);return{totalRecords:e,totalPresent:t,totalLate:r,avgAttendanceRate:a.reduce((e,t)=>e+t.attendanceRate,0)/a.length||0,lateRate:e>0?r/t*100:0}},[a]);return(0,r.jsxs)("div",{className:"p-6 space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-heading",children:"Reports & Analytics"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:"Comprehensive attendance insights and trends"})]}),(0,r.jsxs)(l.$,{onClick:()=>{let t=new Blob([JSON.stringify({summary:A,attendanceTrend:a,departmentBreakdown:p,lateArrivals:f,monthlyOverview:b,generatedAt:new Date().toISOString(),filters:e},null,2)],{type:"application/json"}),r=document.createElement("a"),n=URL.createObjectURL(t);r.setAttribute("href",n),r.setAttribute("download","attendance-analytics-report-".concat(e.dateFrom,"-to-").concat(e.dateTo,".json")),r.style.visibility="hidden",document.body.appendChild(r),r.click(),document.body.removeChild(r)},className:"bg-secondary hover:bg-secondary/90",children:[(0,r.jsx)(h.A,{className:"mr-2 h-4 w-4"}),"Export Report"]})]}),(0,r.jsxs)(s.Zp,{children:[(0,r.jsxs)(s.aR,{children:[(0,r.jsx)(s.ZB,{children:"Report Filters"}),(0,r.jsx)(s.BT,{children:"Customize the date range and department for your analytics"})]}),(0,r.jsx)(s.Wu,{children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d.J,{htmlFor:"dateFrom",children:"From Date"}),(0,r.jsx)(o.p,{id:"dateFrom",type:"date",value:e.dateFrom,onChange:e=>t(t=>({...t,dateFrom:e.target.value}))})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d.J,{htmlFor:"dateTo",children:"To Date"}),(0,r.jsx)(o.p,{id:"dateTo",type:"date",value:e.dateTo,onChange:e=>t(t=>({...t,dateTo:e.target.value}))})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d.J,{children:"Department"}),(0,r.jsxs)(c.l6,{value:e.department,onValueChange:e=>t(t=>({...t,department:e})),children:[(0,r.jsx)(c.bq,{children:(0,r.jsx)(c.yv,{placeholder:"All Departments"})}),(0,r.jsxs)(c.gC,{children:[(0,r.jsx)(c.eb,{value:"All Departments",children:"All Departments"}),["Engineering","Design","Marketing","Sales","HR","Finance"].map(e=>(0,r.jsx)(c.eb,{value:e,children:e},e))]})]})]})]})})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,r.jsxs)(s.Zp,{children:[(0,r.jsxs)(s.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(s.ZB,{className:"text-sm font-medium text-muted-foreground",children:"Avg Attendance Rate"}),(0,r.jsx)(x.A,{className:"h-4 w-4 text-secondary"})]}),(0,r.jsx)(s.Wu,{children:(0,r.jsxs)("div",{className:"text-2xl font-bold font-heading",children:[A.avgAttendanceRate.toFixed(1),"%"]})})]}),(0,r.jsxs)(s.Zp,{children:[(0,r.jsxs)(s.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(s.ZB,{className:"text-sm font-medium text-muted-foreground",children:"Total Present"}),(0,r.jsx)(m.A,{className:"h-4 w-4 text-primary"})]}),(0,r.jsx)(s.Wu,{children:(0,r.jsx)("div",{className:"text-2xl font-bold font-heading",children:A.totalPresent.toLocaleString()})})]}),(0,r.jsxs)(s.Zp,{children:[(0,r.jsxs)(s.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(s.ZB,{className:"text-sm font-medium text-muted-foreground",children:"Late Arrivals"}),(0,r.jsx)(u.A,{className:"h-4 w-4 text-yellow-500"})]}),(0,r.jsxs)(s.Wu,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold font-heading",children:A.totalLate.toLocaleString()}),(0,r.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:[A.lateRate.toFixed(1),"% of present"]})]})]}),(0,r.jsxs)(s.Zp,{children:[(0,r.jsxs)(s.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(s.ZB,{className:"text-sm font-medium text-muted-foreground",children:"Total Records"}),(0,r.jsx)(j.A,{className:"h-4 w-4 text-accent"})]}),(0,r.jsx)(s.Wu,{children:(0,r.jsx)("div",{className:"text-2xl font-bold font-heading",children:A.totalRecords.toLocaleString()})})]})]}),(0,r.jsxs)(i.tU,{defaultValue:"trends",className:"space-y-4",children:[(0,r.jsxs)(i.j7,{className:"grid w-full grid-cols-4",children:[(0,r.jsx)(i.Xi,{value:"trends",children:"Attendance Trends"}),(0,r.jsx)(i.Xi,{value:"departments",children:"Department Breakdown"}),(0,r.jsx)(i.Xi,{value:"late",children:"Late Arrivals"}),(0,r.jsx)(i.Xi,{value:"monthly",children:"Monthly Overview"})]}),(0,r.jsx)(i.av,{value:"trends",className:"space-y-4",children:(0,r.jsx)(S,{data:a})}),(0,r.jsx)(i.av,{value:"departments",className:"space-y-4",children:(0,r.jsx)(F,{data:p})}),(0,r.jsx)(i.av,{value:"late",className:"space-y-4",children:(0,r.jsx)(O,{data:f})}),(0,r.jsx)(i.av,{value:"monthly",className:"space-y-4",children:(0,r.jsx)(H,{data:b})})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[152,12,422,260,675,524,827,476,571,358],()=>t(15754)),_N_E=e.O()}]);